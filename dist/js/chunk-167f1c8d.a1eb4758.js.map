{"version":3,"sources":["webpack:///./src/components/lists/EntityTaskList.vue?ca59","webpack:///src/components/lists/EntityTaskList.vue","webpack:///./src/components/lists/EntityTaskList.vue?129b","webpack:///./src/components/lists/EntityTaskList.vue","webpack:///./src/components/pages/Edit.vue?efbc","webpack:///src/components/pages/Edit.vue","webpack:///./src/components/pages/Edit.vue?adf4","webpack:///./src/components/pages/Edit.vue","webpack:///./src/components/pages/Edit.vue?f444","webpack:///./src/components/lists/EntityTaskList.vue?e4a9","webpack:///./src/components/mixins/entity.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","_v","_s","$t","substring","attrs","isLoading","isError","entries","length","directives","name","rawName","value","expression","_l","taskId","key","id","class","selected","currentTask","on","$event","selectTask","getTask","getTaskType","currentProduction","_e","getTaskEstimation","getTaskDuration","getTaskStartDate","getTaskDueDate","isCurrentUserClient","isCurrentUserVendor","getAssignees","personId","personMap","get","staticRenderFns","mixins","format","components","TableInfo","TaskTypeCell","PeopleAvatar","ValidationTag","props","type","Array","default","Boolean","data","computed","sortedEntries","taskTypeAPriority","taskTypeBPriority","taskTypeA","localeCompare","taskTypeB","methods","onBodyScroll","$refs","headerWrapper","style","left","taskMap","task","start_date","due_date","estimation","duration","taskTypeMap","task_type_id","assignees","$emit","component","editsPath","currentEdit","title","modals","edit","currentTasks","map","t","onTaskSelected","descriptor","field_name","scheduleItems","tasksStartDate","tasksEndDate","loading","errors","confirmEditEdit","entity","ButtonSimple","ChevronLeftIcon","DescriptionCell","EditEditModal","EntityThumbnail","EntityTaskList","PageSubtitle","PageTitle","Schedule","TaskInfo","mounted","clearSelectedTasks","getCurrentEdit","resetData","episode_name","editThumbnailPath","isPreview","changeTab","selectedTab","tab","editMap","route","params","edit_id","onEditClicked","form","editEdit","buildAssetRoute","isTVShow","episodeId","production_id","asset_id","asset","$nextTick","watch","currentEpisode","size","metaInfo","entityMixin","currentSection","zoomLevel","entityNavOptions","label","zoomOptions","created","beforeDestroy","currentAsset","currentShot","tasks","filter","sort","a","b","getTaskTypePriority","children","getFirstStartDate","clone","add","moment","getLastEndDate","manDays","rootElement","avatar","color","priority","expanded","editable","limitStartDate","endDate","formatDuration","startDate","real_start_date","end_date","parseSimpleDate","isBefore","taskType","man_days","unresizable","parentElement","c","rootStartDate","rootEndDate","Object","assign","$router","push","query","section","schedule","scrollToToday"],"mappings":"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","file":"js/chunk-167f1c8d.a1eb4758.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"data-list\"},[_c('div',[_c('table',{ref:\"headerWrapper\",staticClass:\"datatable\"},[_c('thead',{staticClass:\"datatable-head\"},[_c('tr',{staticClass:\"datatable-row-header\"},[_c('th',{staticClass:\"type\"},[_vm._v(\" \"+_vm._s(_vm.$t('tasks.fields.task_type'))+\" \")]),_c('th',{staticClass:\"status\"},[_vm._v(\" \"+_vm._s(_vm.$t('tasks.fields.task_status'))+\" \")]),_c('th',{staticClass:\"estimation\"},[_vm._v(\" \"+_vm._s(_vm.$t('tasks.fields.estimation').substring(0, 3))+\". \")]),_c('th',{staticClass:\"estimation\"},[_vm._v(\" \"+_vm._s(_vm.$t('tasks.fields.duration').substring(0, 3))+\". \")]),_c('th',{staticClass:\"startdate\"},[_vm._v(\" \"+_vm._s(_vm.$t('tasks.fields.start_date_short'))+\" \")]),_c('th',{staticClass:\"duedate\"},[_vm._v(\" \"+_vm._s(_vm.$t('tasks.fields.due_date'))+\" \")]),_c('th',{staticClass:\"assignees\"},[_vm._v(\" \"+_vm._s(_vm.$t('tasks.fields.assignees'))+\" \")]),_c('th',{staticClass:\"end-cell\"})])])])]),_c('table-info',{attrs:{\"is-loading\":_vm.isLoading,\"is-error\":_vm.isError}}),(_vm.entries.length > 0)?_c('div',{directives:[{name:\"scroll\",rawName:\"v-scroll\",value:(_vm.onBodyScroll),expression:\"onBodyScroll\"}],staticClass:\"task-list-body\"},[_c('table',{staticClass:\"datatable\"},[_c('tbody',{staticClass:\"datatable-body\"},_vm._l((_vm.sortedEntries),function(taskId){return _c('tr',{key:typeof (taskId) === 'string' ? taskId : taskId.id,class:{\n            selected: _vm.currentTask && _vm.currentTask.id === taskId,\n            'datatable-row': true,\n            'datatable-row--selectable': true\n          },on:{\"click\":function($event){_vm.selectTask(_vm.getTask(taskId))}}},[(_vm.getTaskType(taskId))?_c('task-type-cell',{staticClass:\"type\",attrs:{\"task-type\":_vm.getTaskType(taskId),\"production-id\":_vm.currentProduction.id}}):_vm._e(),_c('td',{staticClass:\"status\"},[(_vm.getTask(taskId))?_c('validation-tag',{attrs:{\"task\":_vm.getTask(taskId),\"is-static\":true}}):_vm._e()],1),_c('td',{staticClass:\"estimation\"},[_vm._v(\" \"+_vm._s(_vm.getTaskEstimation(taskId))+\" \")]),_c('td',{staticClass:\"estimation\"},[_vm._v(\" \"+_vm._s(_vm.getTaskDuration(taskId))+\" \")]),_c('td',{staticClass:\"startdate\"},[_vm._v(\" \"+_vm._s(_vm.getTaskStartDate(taskId))+\" \")]),_c('td',{staticClass:\"duedate\"},[_vm._v(\" \"+_vm._s(_vm.getTaskDueDate(taskId))+\" \")]),_c('td',{staticClass:\"assignees\"},[(!_vm.isCurrentUserClient && !_vm.isCurrentUserVendor)?_c('div',{staticClass:\"flexrow\"},_vm._l((_vm.getAssignees(taskId)),function(personId){return _c('div',{key:personId,staticClass:\"avatar-wrapper\"},[_c('people-avatar',{key:taskId + '-' + personId,staticClass:\"person-avatar flexrow-item\",attrs:{\"person\":_vm.personMap.get(personId),\"size\":30,\"font-size\":15}})],1)}),0):_vm._e()]),_c('td',{staticClass:\"end-cell\"})],1)}),0)])]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<div class=\"data-list\">\n\n  <div>\n    <table class=\"datatable\" ref=\"headerWrapper\">\n      <thead class=\"datatable-head\">\n        <tr class=\"datatable-row-header\">\n          <th class=\"type\">\n            {{ $t('tasks.fields.task_type') }}\n          </th>\n          <th class=\"status\">\n            {{ $t('tasks.fields.task_status') }}\n          </th>\n          <th class=\"estimation\">\n            {{ $t('tasks.fields.estimation').substring(0, 3) }}.\n          </th>\n          <th class=\"estimation\">\n            {{ $t('tasks.fields.duration').substring(0, 3) }}.\n          </th>\n          <th class=\"startdate\">\n            {{ $t('tasks.fields.start_date_short') }}\n          </th>\n          <th class=\"duedate\">\n            {{ $t('tasks.fields.due_date') }}\n          </th>\n          <th class=\"assignees\">\n            {{ $t('tasks.fields.assignees') }}\n          </th>\n          <th class=\"end-cell\"></th>\n        </tr>\n      </thead>\n    </table>\n  </div>\n\n  <table-info\n    :is-loading=\"isLoading\"\n    :is-error=\"isError\"\n  />\n\n  <div class=\"task-list-body\" v-scroll=\"onBodyScroll\" v-if=\"entries.length > 0\">\n    <table class=\"datatable\">\n      <tbody class=\"datatable-body\">\n        <tr\n          :key=\"typeof (taskId) === 'string' ? taskId : taskId.id\"\n          :class=\"{\n            selected: currentTask && currentTask.id === taskId,\n            'datatable-row': true,\n            'datatable-row--selectable': true\n          }\"\n          @click=\"selectTask(getTask(taskId))\"\n          v-for=\"taskId in sortedEntries\"\n        >\n          <task-type-cell\n            class=\"type\"\n            :task-type=\"getTaskType(taskId)\"\n            :production-id=\"currentProduction.id\"\n            v-if=\"getTaskType(taskId)\"\n          />\n          <td class=\"status\">\n            <validation-tag\n              :task=\"getTask(taskId)\"\n              :is-static=\"true\"\n              v-if=\"getTask(taskId)\"\n            />\n          </td>\n          <td class=\"estimation\">\n            {{ getTaskEstimation(taskId) }}\n          </td>\n          <td class=\"estimation\">\n            {{ getTaskDuration(taskId) }}\n          </td>\n          <td class=\"startdate\">\n            {{ getTaskStartDate(taskId) }}\n          </td>\n          <td class=\"duedate\">\n            {{ getTaskDueDate(taskId) }}\n          </td>\n          <td class=\"assignees\">\n            <div\n              class=\"flexrow\"\n              v-if=\"!isCurrentUserClient && !isCurrentUserVendor\"\n            >\n              <div\n                class=\"avatar-wrapper\"\n                :key=\"personId\"\n                v-for=\"personId in getAssignees(taskId)\"\n              >\n                <people-avatar\n                  class=\"person-avatar flexrow-item\"\n                  :key=\"taskId + '-' + personId\"\n                  :person=\"personMap.get(personId)\"\n                  :size=\"30\"\n                  :font-size=\"15\"\n                />\n              </div>\n            </div>\n          </td>\n          <td class=\"end-cell\"></td>\n       </tr>\n      </tbody>\n    </table>\n  </div>\n\n</div>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from 'vuex'\n\nimport { formatListMixin } from '@/components/mixins/format'\n\nimport TaskTypeCell from '../cells/TaskTypeName'\nimport TableInfo from '../widgets/TableInfo'\nimport ValidationTag from '../widgets/ValidationTag'\nimport PeopleAvatar from '../widgets/PeopleAvatar'\n\nexport default {\n  name: 'entity-task-list',\n  mixins: [formatListMixin],\n\n  components: {\n    TableInfo,\n    TaskTypeCell,\n    PeopleAvatar,\n    ValidationTag\n  },\n\n  props: {\n    entries: {\n      type: Array,\n      default: () => []\n    },\n    isLoading: {\n      type: Boolean,\n      default: false\n    },\n    isError: {\n      type: Boolean,\n      default: false\n    }\n  },\n\n  data () {\n    return {\n      currentTask: null\n    }\n  },\n\n  computed: {\n    ...mapGetters([\n      'currentProduction',\n      'getTaskTypePriority',\n      'isCurrentUserClient',\n      'isCurrentUserVendor',\n      'personMap',\n      'taskMap',\n      'taskTypeMap'\n    ]),\n\n    sortedEntries () {\n      return [...this.entries].sort((taskIdA, taskIdB) => {\n        const taskA = this.getTask(taskIdA)\n        const taskB = this.getTask(taskIdB)\n        const taskTypeA = this.taskTypeMap.get(taskA.task_type_id)\n        const taskTypeB = this.taskTypeMap.get(taskB.task_type_id)\n        const taskTypeAPriority = this.getTaskTypePriority(taskA.task_type_id)\n        const taskTypeBPriority = this.getTaskTypePriority(taskB.task_type_id)\n        if (taskTypeAPriority === taskTypeBPriority) {\n          return taskTypeA.name.localeCompare(taskTypeB.name)\n        } else {\n          return taskTypeAPriority - taskTypeBPriority\n        }\n      })\n    }\n  },\n\n  methods: {\n    ...mapActions([\n    ]),\n\n    onBodyScroll (event, position) {\n      this.$refs.headerWrapper.style.left = `-${position.scrollLeft}px`\n    },\n\n    getTask (task) {\n      if (typeof (task) === 'string') {\n        return this.taskMap.get(task)\n      } else {\n        return task\n      }\n    },\n\n    getTaskStartDate (taskId) {\n      const task = this.getTask(taskId)\n      return task && task.start_date\n        ? task.start_date.substring(0, 10)\n        : ''\n    },\n\n    getTaskDueDate (taskId) {\n      const task = this.getTask(taskId)\n      return task && task.due_date\n        ? task.due_date.substring(0, 10)\n        : ''\n    },\n\n    getTaskEstimation (taskId) {\n      const task = this.getTask(taskId)\n      return task && task.estimation\n        ? this.formatDuration(task.estimation)\n        : ''\n    },\n\n    getTaskDuration (taskId) {\n      const task = this.getTask(taskId)\n      return task && task.duration\n        ? this.formatDuration(task.duration)\n        : ''\n    },\n\n    getTaskType (entry) {\n      const task = this.getTask(entry)\n      return task ? this.taskTypeMap.get(task.task_type_id) : null\n    },\n\n    getAssignees (entry) {\n      const task = this.getTask(entry)\n      return task ? task.assignees : []\n    },\n\n    selectTask (task) {\n      this.currentTask = task\n      this.$emit('task-selected', task)\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.data-list {\n  max-width: 500px;\n  margin-top: 0;\n}\n\n.type {\n  max-width: 250px;\n  min-width: 250px;\n}\n\n.estimation {\n  max-width: 50px;\n  min-width: 50px;\n}\n\n.startdate,\n.duedate {\n  max-width: 100px;\n  min-width: 100px;\n}\n\n.status {\n  max-width: 100px;\n  min-width: 100px;\n}\n\n.assignees {\n  max-width: 150px;\n  min-width: 150px;\n}\n\n.end-cell {\n  width: 100%;\n}\n\n.flexrow-item {\n  margin-right: 0.3em;\n}\n\n.avatar-wrapper {\n  margin-right: 0.5em;\n}\n\n.task-list-body {\n  overflow-y: auto;\n  overflow-x: hidden;\n}\n\n.datatable-row-header::after {\n  display: none;\n}\n</style>\n","import mod from \"-!../../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./EntityTaskList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./EntityTaskList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EntityTaskList.vue?vue&type=template&id=4493a215&scoped=true&\"\nimport script from \"./EntityTaskList.vue?vue&type=script&lang=js&\"\nexport * from \"./EntityTaskList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EntityTaskList.vue?vue&type=style&index=0&id=4493a215&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4493a215\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"columns fixed-page edit\"},[_c('div',{staticClass:\"column main-column\"},[_c('div',{staticClass:\"page-header flexrow\"},[_c('router-link',{staticClass:\"flexrow-item has-text-centered back-link\",attrs:{\"to\":_vm.editsPath}},[_c('chevron-left-icon')],1),(_vm.currentEdit)?_c('entity-thumbnail',{staticClass:\"edit-thumbnail flexrow-item\",attrs:{\"entity\":_vm.currentEdit,\"with-link\":false}}):_vm._e(),_c('div',{staticClass:\"flexrow-item\"},[_c('page-title',{staticClass:\"entity-title\",attrs:{\"text\":_vm.title}})],1),_c('div',{staticClass:\"flexrow-item\"},[(_vm.isCurrentUserManager)?_c('button-simple',{attrs:{\"icon\":\"edit\"},on:{\"click\":function($event){_vm.modals.edit = true}}}):_vm._e()],1)],1),_c('div',{staticClass:\"flexrow infos\"},[_c('div',{staticClass:\"flexrow-item\"},[_c('page-subtitle',{attrs:{\"text\":_vm.$t('edits.tasks')}}),_c('entity-task-list',{staticClass:\"task-list\",attrs:{\"entries\":_vm.currentTasks.map(function (t) { return t.id; }),\"is-loading\":!_vm.currentEdit,\"is-error\":false},on:{\"task-selected\":_vm.onTaskSelected}})],1),_c('div',{staticClass:\"flexrow-item\"},[_c('page-subtitle',{attrs:{\"text\":_vm.$t('main.info')}}),_c('div',{staticClass:\"table-body\"},[(_vm.currentEdit)?_c('table',{staticClass:\"datatable\"},[_c('tbody',{staticClass:\"datatable-body\"},[_c('tr',{staticClass:\"datatable-row\"},[_c('td',{staticClass:\"field-label\"},[_vm._v(_vm._s(_vm.$t('edits.fields.description')))]),_c('description-cell',{attrs:{\"entry\":_vm.currentEdit,\"full\":true}})],1),_vm._l((_vm.editMetadataDescriptors),function(descriptor){return _c('tr',{key:descriptor.id,staticClass:\"datatable-row\"},[_c('td',{staticClass:\"field-label\"},[_vm._v(_vm._s(descriptor.name))]),_c('td',[_vm._v(\" \"+_vm._s(_vm.currentEdit.data ? _vm.currentEdit.data[descriptor.field_name] : '')+\" \")])])})],2)]):_vm._e()])],1)]),(_vm.scheduleItems.length > 0)?_c('div',{staticClass:\"infos schedule\"},[_c('page-subtitle',{staticClass:\"schedule-title\",attrs:{\"text\":\"Schedule\"}}),_c('div',{staticClass:\"wrapper\"},[_c('schedule',{ref:\"schedule-widget\",staticClass:\"schedule-widget\",attrs:{\"start-date\":_vm.tasksStartDate,\"end-date\":_vm.tasksEndDate,\"hierarchy\":_vm.scheduleItems,\"zoom-level\":2,\"height\":385,\"is-loading\":false,\"is-estimation-linked\":true,\"hide-root\":true,\"with-milestones\":false}})],1)],1):_vm._e()]),(_vm.currentTask)?_c('div',{staticClass:\"column side-column\"},[_c('task-info',{attrs:{\"task\":_vm.currentTask}})],1):_vm._e(),_c('edit-edit-modal',{ref:\"edit-edit-modal\",attrs:{\"active\":_vm.modals.edit,\"is-loading\":_vm.loading.edit,\"is-error\":_vm.errors.edit,\"edit-to-edit\":_vm.currentEdit},on:{\"cancel\":function($event){_vm.modals.edit = false},\"confirm\":_vm.confirmEditEdit}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<div class=\"columns fixed-page edit\">\n  <div class=\"column main-column\">\n    <div class=\"page-header flexrow\">\n      <router-link\n        class=\"flexrow-item has-text-centered back-link\"\n        :to=\"editsPath\"\n      >\n        <chevron-left-icon />\n      </router-link>\n      <entity-thumbnail\n        class=\"edit-thumbnail flexrow-item\"\n        :entity=\"currentEdit\"\n        :with-link=\"false\"\n        v-if=\"currentEdit\"\n      />\n      <div class=\"flexrow-item\">\n        <page-title :text=\"title\" class=\"entity-title\" />\n      </div>\n      <div class=\"flexrow-item\">\n        <button-simple\n          icon=\"edit\"\n          @click=\"modals.edit = true\"\n          v-if=\"isCurrentUserManager\"\n        />\n      </div>\n    </div>\n\n    <div class=\"flexrow infos\">\n      <div class=\"flexrow-item\">\n      <page-subtitle :text=\"$t('edits.tasks')\" />\n      <entity-task-list\n        class=\"task-list\"\n        :entries=\"currentTasks.map(t => t.id)\"\n        :is-loading=\"!currentEdit\"\n        :is-error=\"false\"\n        @task-selected=\"onTaskSelected\"\n      />\n      </div>\n      <div class=\"flexrow-item\">\n        <page-subtitle :text=\"$t('main.info')\" />\n        <div class=\"table-body\">\n          <table class=\"datatable\" v-if=\"currentEdit\">\n            <tbody class=\"datatable-body\">\n              <tr\n                class=\"datatable-row\"\n              >\n                <td class=\"field-label\">{{ $t('edits.fields.description') }}</td>\n                <description-cell\n                  :entry=\"currentEdit\"\n                  :full=\"true\"\n                />\n              </tr>\n\n              <tr\n                :key=\"descriptor.id\"\n                class=\"datatable-row\"\n                v-for=\"descriptor in editMetadataDescriptors\"\n              >\n                <td class=\"field-label\">{{ descriptor.name }}</td>\n                <td>\n                  {{ currentEdit.data ? currentEdit.data[descriptor.field_name] : '' }}\n                </td>\n              </tr>\n\n            </tbody>\n        </table>\n      </div>\n      </div>\n    </div>\n\n    <div class=\"infos schedule\" v-if=\"scheduleItems.length > 0\">\n      <page-subtitle class=\"schedule-title\" text=\"Schedule\" />\n      <div class=\"wrapper\">\n        <schedule\n          ref=\"schedule-widget\"\n          class=\"schedule-widget\"\n          :start-date=\"tasksStartDate\"\n          :end-date=\"tasksEndDate\"\n          :hierarchy=\"scheduleItems\"\n          :zoom-level=\"2\"\n          :height=\"385\"\n          :is-loading=\"false\"\n          :is-estimation-linked=\"true\"\n          :hide-root=\"true\"\n          :with-milestones=\"false\"\n        />\n      </div>\n    </div>\n  </div>\n\n  <div\n    class=\"column side-column\"\n    v-if=\"currentTask\"\n  >\n    <task-info\n      :task=\"currentTask\"\n    />\n  </div>\n\n  <edit-edit-modal\n    ref=\"edit-edit-modal\"\n    :active=\"modals.edit\"\n    :is-loading=\"loading.edit\"\n    :is-error=\"errors.edit\"\n    :edit-to-edit=\"currentEdit\"\n    @cancel=\"modals.edit = false\"\n    @confirm=\"confirmEditEdit\"\n  />\n</div>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from 'vuex'\nimport { ChevronLeftIcon } from 'vue-feather-icons'\n\nimport { episodifyRoute } from '@/lib/path'\nimport { entityMixin } from '@/components/mixins/entity'\nimport { formatListMixin } from '@/components/mixins/format'\n\nimport ButtonSimple from '@/components/widgets/ButtonSimple'\nimport DescriptionCell from '@/components/cells/DescriptionCell'\nimport EditEditModal from '@/components/modals/EditEditModal'\nimport EntityThumbnail from '@/components/widgets/EntityThumbnail'\nimport EntityTaskList from '@/components/lists/EntityTaskList'\nimport PageTitle from '@/components/widgets/PageTitle'\nimport PageSubtitle from '@/components/widgets/PageSubtitle'\nimport Schedule from '../pages/schedule/Schedule'\nimport TaskInfo from '@/components/sides/TaskInfo'\n\nexport default {\n  name: 'edit',\n  mixins: [entityMixin, formatListMixin],\n  components: {\n    ButtonSimple,\n    ChevronLeftIcon,\n    DescriptionCell,\n    EditEditModal,\n    EntityThumbnail,\n    EntityTaskList,\n    PageSubtitle,\n    PageTitle,\n    Schedule,\n    TaskInfo\n  },\n\n  data () {\n    return {\n      currentEdit: null,\n      currentTask: null,\n      isLoading: false,\n      isError: false,\n      errors: {\n        edit: false\n      },\n      loading: {\n        edit: false\n      },\n      modals: {\n        edit: false\n      }\n    }\n  },\n\n  mounted () {\n    this.clearSelectedTasks()\n    this.currentEdit = this.getCurrentEdit()\n\n    this.isLoading = true\n    this.isError = false\n\n    if (this.currentEdit) {\n    } else {\n      this.resetData()\n    }\n  },\n\n  computed: {\n    ...mapGetters([\n      'currentEpisode',\n      'currentProduction',\n      'getTaskTypePriority',\n      'isCurrentUserManager',\n      'isTVShow',\n      'route',\n      'editMap',\n      'editMetadataDescriptors',\n      'editsPath',\n      'taskMap',\n      'taskTypeMap'\n    ]),\n\n    title () {\n      if (this.currentEdit) {\n        if (this.currentEdit.episode_name) {\n          return `${this.currentEdit.episode_name} / ` +\n                 `${this.currentEdit.name}`\n        } else {\n          return `${this.currentEdit.name}`\n        }\n      } else {\n        return 'Loading...'\n      }\n    },\n\n    editThumbnailPath () {\n      const previewId = this.currentEdit.preview_file_id\n      return `/api/pictures/originals/preview-files/${previewId}.png`\n    },\n\n    isPreview () {\n      return this.currentEdit &&\n        this.currentEdit.preview_file_id &&\n        this.currentEdit.preview_file_id.length > 0\n    }\n  },\n\n  methods: {\n    ...mapActions([\n      'clearSelectedTasks',\n      'editEdit',\n      'loadAssets',\n      'loadEdits'\n    ]),\n\n    changeTab (tab) {\n      this.selectedTab = tab\n    },\n\n    getCurrentEdit () {\n      return this.editMap.get(this.route.params.edit_id) || null\n    },\n\n    onEditClicked () {\n      this.modals.edit = true\n    },\n\n    confirmEditEdit (form) {\n      form.id = this.currentEdit.id\n      this.loading.edit = true\n      this.errors.edit = false\n      this.editEdit(form)\n        .then(() => {\n          this.loading.edit = false\n          this.modals.edit = false\n        })\n        .catch((err) => {\n          console.error(err)\n          this.loading.edit = false\n          this.errors.edit = true\n        })\n    },\n\n    onTaskSelected (task) {\n      this.currentTask = task\n    },\n\n    buildAssetRoute (asset) {\n      let episodeId = asset.episode_id\n      if (this.isTVShow && !episodeId) episodeId = 'main'\n      const route = {\n        name: 'asset',\n        params: {\n          production_id: this.currentProduction.id,\n          asset_id: asset.asset_id\n        }\n      }\n      return episodifyRoute(route, episodeId)\n    },\n\n    resetData () {\n      this.$nextTick(() => {\n        this.loadEdits(() => {\n          this.loadAssets()\n            .then(() => {\n              this.currentEdit = this.getCurrentEdit()\n              this.isLoading = false\n            })\n        })\n      })\n    }\n  },\n\n  watch: { // Needed when reloading the page with F5\n    currentProduction () {\n      if (!this.isTVShow) this.resetData()\n    },\n\n    currentEpisode () {\n      if (this.isTVShow && this.editMap.size === 0) {\n        this.resetData()\n      }\n    }\n  },\n\n  metaInfo () {\n    return {\n      title: `${this.title} - Kitsu`\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.dark .page {\n  background: $dark-grey-light;\n  height: 100%;\n  padding-bottom: 1em;\n}\n\n.dark .page-header,\n.dark .infos {\n  background: #46494F;\n  border-color: $dark-grey;\n  box-shadow: 0px 0px 6px #333;\n}\n\n.dark .wrapper {\n  background: $dark-grey-2;\n}\n\nh2.subtitle {\n  margin-top: 0;\n  margin-bottom: 0.5em;\n  font-weight: 300;\n  font-size: 1.5em;\n}\n\n.page {\n  background: #F9F9F9;\n  padding: 0em;\n}\n\n.page-header {\n  padding: 1em 1em 1em 1em;\n  background: white;\n  box-shadow: 0px 0px 6px #E0E0E0;\n  margin-top: calc(50px + 2em);\n  margin-bottom: 2em;\n  margin-left: 1em;\n  margin-right: 1em;\n}\n\n.infos {\n  background: white;\n  padding: 1em 1em 1em 1em;\n  box-shadow: 0px 0px 6px #E0E0E0;\n  margin-bottom: 1em;\n  margin-left: 1em;\n  margin-right: 1em;\n\n  .flexrow-item {\n    align-self: flex-start;\n    flex: 1;\n  }\n}\n\n.edit-thumbnail {\n  max-width: 100px;\n}\n\n.asset-link .thumbnail-picture {\n  margin-bottom: 0.5em;\n}\n\n.asset-type {\n  text-transform: uppercase;\n  font-size: 1.2em;\n  color: var(--text);\n  margin-top: 2em;\n  margin-bottom: 0.4em;\n}\n\n.asset-list {\n  color: var(--text);\n  display: flex;\n  flex-wrap: wrap;\n}\n\n.asset-link {\n  color: inherit;\n  margin-right: 1em;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  font-size: 0.8em;\n}\n\n.asset-link div {\n  max-width: 100px;\n}\n\n.asset-link span {\n  word-wrap: break-word;\n}\n\n.field-label {\n  font-weight: bold;\n  width: 140px;\n}\n\n.page-header {\n  align-items: center;\n}\n\n.data-list {\n  max-width: 100%;\n}\n\n.page-header .thumbnail-picture {\n  margin: 0 1em 0 0;\n  max-width: 80px;\n}\n\n.back-link {\n  padding-top: 3px;\n}\n\n.task-list {\n  width: 100%;\n}\n\n.datatable-row {\n  user-select: text;\n}\n\n.schedule {\n  position: relative;\n  height: 300px;\n  padding: 10px;\n\n  .schedule-title {\n    margin-bottom: 5px;\n  }\n\n  .wrapper {\n    height: 230px;\n    border-radius: 10px;\n  }\n}\n\n.column.main-column {\n  background: var(--background-page);\n  padding-bottom: 1em;\n}\n\n@media screen and (max-width: 768px) {\n  .task-column {\n    margin-bottom: 1em;\n  }\n\n  .column:first-child {\n    margin-right: 0;\n  }\n\n  .entity-title {\n    font-size: 1.3em;\n    line-height: 1.5em;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Edit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Edit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Edit.vue?vue&type=template&id=a27e5528&scoped=true&\"\nimport script from \"./Edit.vue?vue&type=script&lang=js&\"\nexport * from \"./Edit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Edit.vue?vue&type=style&index=0&id=a27e5528&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a27e5528\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Edit.vue?vue&type=style&index=0&id=a27e5528&lang=scss&scoped=true&\"","export * from \"-!../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./EntityTaskList.vue?vue&type=style&index=0&id=4493a215&lang=scss&scoped=true&\"","import {\n  getFirstStartDate,\n  getLastEndDate,\n  parseSimpleDate\n} from '@/lib/time'\nimport moment from 'moment'\n\n/*\n * Common functions to shot and asset pages.\n */\nexport const entityMixin = {\n  data () {\n    return {\n      currentSection: 'Casting',\n      zoomLevel: 1,\n      entityNavOptions: [\n        { label: 'Casting', value: 'casting' },\n        { label: 'Schedule', value: 'schedule' },\n        { label: 'Preview Files', value: 'preview-files' },\n        { label: 'Activity', value: 'activity' },\n        { label: 'Timelog', value: 'time-logs' }\n      ],\n      zoomOptions: [\n        { label: '1', value: 1 },\n        { label: '2', value: 2 },\n        { label: '3', value: 3 }\n      ]\n    }\n  },\n\n  created () {\n  },\n\n  mounted () {\n  },\n\n  beforeDestroy () {\n  },\n\n  computed: {\n    currentTasks () {\n      const entity = this.currentAsset || this.currentShot\n      return entity\n        ? entity\n          .tasks\n          .map(taskId => this.taskMap.get(taskId))\n          .filter(task => task)\n          .sort((a, b) => {\n            const taskTypeAPriority = this.getTaskTypePriority(a.task_type_id)\n            const taskTypeBPriority = this.getTaskTypePriority(b.task_type_id)\n            return taskTypeAPriority - taskTypeBPriority\n          })\n        : []\n    },\n\n    tasksStartDate () {\n      if (this.scheduleItems.length > 0 &&\n          this.scheduleItems[0].children.length > 0) {\n        return getFirstStartDate(this.scheduleItems[0].children)\n          .clone()\n          .add(-60, 'days')\n      } else {\n        return moment()\n      }\n    },\n\n    tasksEndDate () {\n      if (this.scheduleItems.length > 0 &&\n          this.scheduleItems[0].children.length > 0) {\n        return getLastEndDate(this.scheduleItems[0].children)\n          .clone()\n          .add(60, 'days')\n      } else {\n        return moment().add(30, 'days')\n      }\n    },\n\n    scheduleItems () {\n      let manDays = 0\n      const rootElement = {\n        avatar: false,\n        id: 'root',\n        name: 'Tasks',\n        color: '#888',\n        priority: 1,\n        expanded: true,\n        loading: false,\n        children: [],\n        editable: false\n      }\n      const limitStartDate = moment()\n      const children = this.currentTasks.map(task => {\n        const estimation = this.formatDuration(task.estimation)\n        let startDate = limitStartDate.clone()\n        let endDate\n\n        if (!task.start_date && !task.real_start_date &&\n            !task.due_date && !task.end_date) return null\n\n        if (task.start_date) {\n          startDate = parseSimpleDate(task.start_date)\n        } else if (task.real_start_date) {\n          startDate = parseSimpleDate(task.real_start_date)\n        }\n\n        if (task.due_date) {\n          endDate = parseSimpleDate(task.due_date)\n        } else if (task.end_date) {\n          endDate = parseSimpleDate(task.end_date)\n        } else if (task.estimation) {\n          endDate = startDate.clone().add(estimation, 'days')\n        }\n\n        if (!endDate || endDate.isBefore(startDate)) {\n          endDate = startDate.clone().add(1, 'days')\n        }\n        if (estimation) manDays += task.estimation\n        const taskType = this.taskTypeMap.get(task.task_type_id)\n\n        return {\n          ...task,\n          name: taskType.name,\n          startDate: startDate,\n          endDate: endDate,\n          expanded: false,\n          loading: false,\n          man_days: estimation,\n          editable: false,\n          unresizable: false,\n          parentElement: rootElement,\n          color: taskType.color,\n          children: []\n        }\n      }).filter(c => c !== null)\n      let rootStartDate = moment()\n      let rootEndDate = moment().add('days', 1)\n      if (children.length > 0) {\n        rootStartDate = getFirstStartDate(children)\n        rootEndDate = getLastEndDate(children)\n      }\n      Object.assign(rootElement, {\n        children: children,\n        startDate: rootStartDate,\n        endDate: rootEndDate,\n        man_days: manDays\n      })\n      return [rootElement]\n    }\n  },\n\n  methods: {\n    onTaskSelected (task) {\n      if (!this.currentTask || this.currentTask.id !== task.id) {\n        this.currentTask = task\n      } else {\n        this.currentTask = null\n      }\n    }\n  },\n\n  watch: {\n    currentSection () {\n      this.$router.push({\n        query: { section: this.currentSection }\n      })\n      const schedule = this.$refs['schedule-widget']\n      if (this.currentSection === 'schedule' && schedule) {\n        schedule.scrollToToday()\n      }\n    }\n  }\n}\n"],"sourceRoot":""}